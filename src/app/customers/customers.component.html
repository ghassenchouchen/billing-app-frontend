<div class="page">
  <div class="page-header">
    <div>
      <h2 class="page-title">Clients</h2>
      <p class="page-subtitle">Gérez les profils clients et les coordonnées.</p>
    </div>
    <div class="page-actions">
      <span class="chip">{{listOfCustomer.length || 0}} clients</span>
      <span class="chip secondary">Données synchronisées</span>
    </div>
  </div>

  <div class="card section-card data-table">
    <div class="card-header">
      <h5 class="card-title mb-0">Répertoire des clients</h5>
    </div>
    <div class="card-body">
      <div class="table-responsive">
        <table class="table table-striped table-hover">
          <thead>
            <tr>
              <th>Référence</th>
              <th>Nom</th>
              <th>Prénom</th>
              <th>Email</th>
              <th>Ville</th>
              <th>Type</th>
              <th>Statut</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let customer of listOfCustomer">
              <td><code>{{customer.customerRef | slice:0:8}}...</code></td>
              <td>{{customer.nom}}</td>
              <td>{{customer.prenom}}</td>
              <td>{{customer.email}}</td>
              <td>{{customer.ville || '-'}}</td>
              <td><span class="badge-soft">{{customer.type}}</span></td>
              <td><span class="badge-soft" [class.success]="customer.status === 'ACTIVE'">{{customer.status}}</span></td>
              <td>
                <button class="btn btn-ghost" type="button" (click)="detail(customer.customerRef)">
                  <span class="material-icons">visibility</span>
                  Détails
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <div class="card section-card customer-details" *ngIf="customerdetails">
    <div class="card-header details-header">
      <div class="details-identity">
        <div class="details-avatar">
          {{customerdetails.prenom?.charAt(0)}}{{customerdetails.nom?.charAt(0)}}
        </div>
        <div>
          <div class="details-name">{{customerdetails.prenom}} {{customerdetails.nom}}</div>
          <div class="details-subtitle">Réf: {{customerdetails.customerRef | slice:0:8}}...</div>
        </div>
      </div>
      <span class="badge-soft neutral">{{customerdetails.type}}</span>
    </div>
    <div class="card-body">
      <div class="details-grid">
        <div class="detail-card">
          <div class="detail-label">Email</div>
          <div class="detail-value">{{customerdetails.email}}</div>
        </div>
        <div class="detail-card">
          <div class="detail-label">Téléphone</div>
          <div class="detail-value">{{customerdetails.telephone || '-'}}</div>
        </div>
        <div class="detail-card">
          <div class="detail-label">Adresse</div>
          <div class="detail-value">{{customerdetails.adresse}}, {{customerdetails.ville}} {{customerdetails.codePostal}}</div>
        </div>
        <div class="detail-card">
          <div class="detail-label">Solde du compte</div>
          <div class="detail-value">{{customerdetails.accountBalance | number:'1.2-2'}} TND</div>
        </div>
        <div class="detail-card">
          <div class="detail-label">Limite de crédit</div>
          <div class="detail-value">{{customerdetails.creditLimit | number:'1.2-2'}} TND</div>
        </div>
      </div>
    </div>
  </div>
</div>
